<!-- Withdraw Form (unchanged) -->
<div class="buy-crypto-group">
  <h5>Withdraw Fund</h5>
    <h5 class="text-warning text-center">{{data2?.walletamount | currency:'USD':true:'1.2-2'}}</h5>
  <form [formGroup]="form" (ngSubmit)="Withdraw()">
  <div class="row">
    <!-- Amount Input -->
    <div class="col-xl-4 col-lg-6">
      <div class="form-group">
        <label>Amount</label>
        <input type="text" formControlName="amount" min="5" class="form-control"  placeholder="Enter amount"
         (input)="formatAmount($event); calculateNetAmount()"   />
        <div *ngIf="form.get('amount')?.invalid && form.get('amount')?.touched" class="text-danger">
          Minimum Withdraw Amount is $5
        </div>
        <small
          class="text-danger"
          *ngIf="form.controls['amount'].touched && form.controls['amount'].hasError('required')"
        >
          Amount is required.
        </small>

        <div *ngIf="netAmount > 0" class="mt-1">

  <p class="text-primary fw-semibold mb-1">
    Net withdraw amount after 10% deduction:
    <span class="text-warning">{{ netAmount | currency:'USD':true:'1.2-2' }}</span>
  </p>

  <!-- <p class="text-info fw-semibold">
    Equivalent Yohan Coins (after deduction):
    <span class="text-warning">{{ calculatedCoins }}</span>
  </p> -->

</div>

        <!-- <small
          class="text-danger"
          *ngIf="form.controls['amount'].touched && form.controls['amount'].hasError('min')"
        >
          Minimum amount is $10
        </small> -->

      </div>
    </div>

    <div class="col-xl-4 col-lg-6">
        <div class="form-group">
          <label for="yohan">Yohan Coins</label>
<input  class="form-control" type="text" id="yohan_amount" [value]="calculatedCoins" readonly />
  <!-- Hidden input for transaction hash -->
  <input type="hidden" id="transactionHashInput" formControlName="transno" />
        </div>
    </div>

    <!-- Wallet Address Display -->
    <div class="col-xl-4 col-lg-6">
      <div class="form-group">
        <label>Wallet Address (USDT BEP20)</label>
        <input type="text" class="form-control" [value]="data2?.wallet1" readonly />
      </div>
    </div>

    <!-- Submit Button and Wallet Missing Message -->
    <div class="buy-crpto-btn mt-4">
   <!-- <button type="submit"
  class="btn btn-primary"
  *ngIf="canWithdraw"
  [disabled]="form.invalid || !pfdata?.aadhar || pfdata?.aadhar.trim() === ''"
>
  Withdraw
</button> -->


      <button type="submit" class="btn btn-primary"
  [disabled]="form.invalid || data1?.sponsors < 2 || !data2?.wallet1 || !data2?.wallet1.trim()">
  Withdraw
</button>


 <p class="text-primary" *ngIf="data1?.sponsors < 2">
  ⚠️ You are not eligible for withdraw amount. You must refer at least 
  <strong>2 Sponsors</strong>.
</p>

      <p class="text-danger mt-2" *ngIf="!data2?.wallet1 || data2?.wallet1.trim() === ''">
        Please set up your USDT BEP20 wallet address in your profile to enable withdrawals.
        <span routerLink="/profile" class="text-success" style="cursor: pointer;">Go to Profile</span>
      </p>
    </div>
  </div>
</form>

</div>

<!-- Bootstrap Modal -->
<div class="modal fade" #successModal tabindex="-1" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered">
    <div class="modal-content text-center p-3">
      <div class="modal-body">
        <h5 *ngIf="successMessage" class="text-success">{{ successMessage }}</h5>
        <h5 *ngIf="errorMessage" class="text-danger">{{ errorMessage }}</h5>
      </div>
      <div class="modal-footer justify-content-center">
        <button type="button" class="btn btn-secondary" (click)="modalRef.hide()">Close</button>
      </div>
    </div>
  </div>
</div>
