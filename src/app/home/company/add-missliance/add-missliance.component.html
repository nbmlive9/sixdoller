<div class="dashboard-container">

  <!-- Header -->
  <app-header></app-header>

  <!-- Wallet Transfer Form Card -->
  <section class="stats-grid">
    <div class="stat-card gradient-cyan w-100">
      <h5 class="text-center">Add Expensive</h5>
            <small class="text-danger"> {{errorMessage}} </small>
      <form [formGroup]="form" novalidate>
        <div class="row">
          <div class="col-md-6 mb-2">
            <input type="text" class="form-control" placeholder="Amount ($)" formControlName="amount">
              <div *ngIf="form.get('amount')?.invalid && form.get('amount')?.touched" class="text-danger small">
                Amount is required 
              </div>
          </div>

            <div class="col-md-6 mb-2">
            <input type="text" class="form-control" placeholder="remark" formControlName="remark">
              <div *ngIf="form.get('remark')?.invalid && form.get('remark')?.touched" class="text-danger small">
                Remark is required 
              </div>
          </div>
         
          
        </div>
        <div class="text-center mt-3">
          <button class="btn register-btn" type="button" (click)="Transfer()" [disabled]="!form.valid">Add</button>
        </div>
      </form>
    </div>
  </section>

  <!-- Transfer Transactions -->
  <section class="extra-grid">
    <div class="w-100">
      <h5 class="text-center mb-3">Transactions</h5>
      <div *ngIf="tdata?.length > 0; else noTransactions">
        <div class="txn-card m-2" *ngFor="let row of tdata">
          <div class="txn-icon"><i class="bi bi-person"></i></div>
          <div class="flex-grow-1">
            <div class="d-flex justify-content-between">
              <div class="txn-title">{{ row.remark }}</div>
              <div class="txn-amt text-white">{{ row.amount | currency:'USD':true:'1.0-2' }}</div>
            </div>
            <div class="d-flex justify-content-between align-items-center">
              <div class="txn-sub">{{ row.cdate | date:'dd/MMM/yyyy' }} <br> ({{ row.ctime }}) </div>
              <span class="badge bg-success">Success</span>
            </div>
          </div>
        </div>
      </div>
      <ng-template #noTransactions>
        <div class="text-center text-light">No transactions yet.</div>
      </ng-template>
    </div>
  </section>

  

</div>

<!-- ✅ Transfer Success Modal -->
<div class="modal fade" id="successTransferModal" tabindex="-1">
  <div class="modal-dialog modal-dialog-centered">
    <div class="modal-content text-center p-3">

      <!-- Spinner before message -->
      <div *ngIf="loadingModal">
        <h4 class="text-success">Processing Add Expensive...</h4>
        <div class="spinner-border text-success mt-2"></div>
        <p class="mt-2">Please wait...</p>
      </div>

      <!-- Success message -->
      <div *ngIf="!loadingModal && successMessage">
        <h4 class="text-success">✅ Success</h4>
        <p class="mt-2">{{ successMessage }}</p>
      </div>

      <!-- Error message -->
      <div *ngIf="!loadingModal && errorMessage">
        <h4 class="text-danger">❌ Failed</h4>
        <p class="mt-2">{{ errorMessage }}</p>
      </div>

    </div>
  </div>
</div>


<!-- Footer Navigation -->
<app-footer></app-footer>


