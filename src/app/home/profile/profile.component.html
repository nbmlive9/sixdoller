<div class="dashboard-container">

  <!-- Top Bar -->
  <app-header></app-header>

  <!-- Activation Fund (Small Highlight) -->
  <div class="highlight-fund-small mt-3 mx-auto">
    <h5>Activation Fund</h5>
    <h3>{{ pfdata?.actwallet | currency:'USD':true:'1.2-2' }}</h3>
  </div>

  <!-- Back & Support Buttons -->
  <div class="container-fluid mt-3 px-3 d-flex justify-content-between align-items-center">
    <h6 class="fw-bold back-link m-0" (click)="goBack()"><i class="fa fa-chevron-left"></i> Back</h6>
    <a routerLink="/support" class="support-btn d-flex align-items-center" style="text-decoration: none;">
      <i class="bi bi-chat-right-text"></i>
      <span class="ms-2">Support</span>
    </a>
  </div>

  <!-- Profile Form Card -->
  <div class="screen">
    <main class="p-3 pb-5 mb-5">
      <form [formGroup]="form" class="profile-card shadow-sm p-4 rounded bg-gradient">
        <h5 class="mb-4 fw-bold text-white">Edit Profile</h5>

        <!-- User ID -->
        <div class="mb-3">
          <label class="form-label fw-semibold text-white">User Id</label>
          <input type="text" [placeholder]="pfdata?.regid" readonly class="form-control crypto-input" />
        </div>

        <!-- Name -->
        <div class="mb-3">
          <label class="form-label fw-semibold text-white">Name</label>
          <input type="text" formControlName="name" class="form-control crypto-input" />
        </div>

        <!-- Password -->
        <div class="mb-3">
          <label class="form-label fw-semibold text-white">Password</label>
          <input type="password" formControlName="password" class="form-control crypto-input" placeholder="Enter new password" />
        </div>

        <!-- Wallet -->
        <div class="mb-3">
          <label class="form-label fw-semibold text-white">Wallet Address</label>
          <input type="text" formControlName="wallet1" class="form-control crypto-input" />
        </div>

        <!-- Email -->
        <div class="mb-3">
          <label class="form-label fw-semibold text-white">Email</label>
          <input type="email" formControlName="email" class="form-control crypto-input" />
        </div>

        <div class="mb-3">
           <label class="form-label fw-semibold text-white">Secure Pin *</label>
                <input type="number" class="form-control crypto-input" placeholder="4 Digit PIN" formControlName="securepin"  (input)="onPinInput($event)" />

              <!-- Validation messages -->
              <div *ngIf="form.get('securepin')?.touched && form.get('securepin')?.invalid" class="text-danger small mt-1">
                <div *ngIf="form.get('securepin')?.errors?.['required']">
                  Secure PIN is required.
                </div>
                <div *ngIf="form.get('securepin')?.errors?.['pattern']">
                  Secure PIN must be exactly 4 digits.
                </div>
              </div>
          </div>

        <!-- Action Buttons -->
        <div class="text-end">
          <button *ngIf="!isEditing" class="btn btn-primary m-1" type="button" (click)="enableEdit()">Edit</button>
          <button *ngIf="isEditing && !showOtpForm" class="btn btn-success m-1" type="button" (click)="updateProfile()">Save</button>
          <button *ngIf="isEditing" class="btn btn-secondary m-1" type="button" (click)="cancelEdit()">Cancel</button>
        </div>
      </form>

      <!-- OTP Form -->
      <!-- <div *ngIf="showOtpForm" class="mt-3">
        <form [formGroup]="formOtp">
          <div class="mb-3">
            <label class="form-label text-white">Enter OTP</label>
            <input type="text" class="form-control crypto-input" formControlName="otp">
          </div>
          <button class="btn btn-primary me-2" type="button" (click)="verifyOtpAndSave()">Verify & Save</button>
          <button class="btn btn-secondary" type="button" (click)="showOtpForm=false">Cancel</button>
        </form>
      </div> -->

      <!-- Alert -->
      <div *ngIf="alertMessage" class="alert alert-{{alertType}} alert-dismissible fade show mt-3" role="alert">
        {{ alertMessage }}
        <button type="button" class="btn-close" (click)="alertMessage = ''"></button>
      </div>

    
    </main>
  </div>

  
</div>

<app-footer></app-footer>